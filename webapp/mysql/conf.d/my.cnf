# 日本語（UTF-8）を正しく扱うための設定
[mysqld]
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
lower_case_table_names=1
secure_file_priv="/docker-entrypoint-initdb.d/csv"
innodb_buffer_pool_size = 1G
innodb_buffer_pool_instances = 2
ngram_token_size=2
max_allowed_packet=2G
max_connections = 100
skip-log-bin
performance_schema = OFF
general_log = OFF

# InnoDBパフォーマンス最適化
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
innodb_log_file_size = 256M
innodb_log_buffer_size = 16M
innodb_file_per_table = 1

# テーブルキャッシュ
table_open_cache = 4000
table_definition_cache = 2000

# ソートバッファ
sort_buffer_size = 2M
read_rnd_buffer_size = 2M

[mysqldump]
max_allowed_packet = 2G

[client]
default-character-set = utf8mb4
